<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />

    <title>GV Sports</title>

    <link rel="stylesheet" href="./css/style.css" />

    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
    />
    <link
      href="https://getbootstrap.com/docs/5.2/assets/css/docs.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
      integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
      integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&family=DM+Sans:wght@500&family=Nabla&family=Supermercado+One&display=swap"
      rel="stylesheet"
    />
    <script src="https://use.fontawesome.com/81b6eb02ea.js"></script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  </head>

  <header class="primary-header" id="header-content">
    <div class="container">
      <div class="nav-wrapper">
        <button
          class="mobile-nav-toggle"
          aria-controls="primary-navigation"
          aria-expanded="false"
        >
          <i
            class="fa fa-bars icon-hamburger text-white"
            aria-hidden="true"
          ></i>
          <i class="fa fa-times icon-close" aria-hidden="true"></i>
          <span class="visually-hidden">Menu</span>
        </button>
        <nav class="primary-navigation" id="primary-navigation">
          <ul aria-label="Primary" role="list" class="nav-list list-unstyled">
            <li><a href="index.html">Home</a></li>
            <li><a href="men.html">Men</a></li>
            <li><a href="women.html">Women</a></li>
            <li><a href="kids.html">Kids</a></li>
          </ul>
        </nav>
        <div class="btn-wrapper">
          <div class="d-flex row gap-2">
            <div class="col">
              <!-- search bar -->
              <button class="search-btn">
                <div class="search_bar_wrap">
                  <div class="search_bar">
                    <input
                      type="text"
                      class="search_bar_input"
                      placeholder="Search"
                      aria-label="search"
                    />
                  </div>
                  <div class="search_btn">
                    <span class="icon"
                      ><ion-icon name="search-outline"></ion-icon
                    ></span>
                  </div>
                  <div class="close_btn">
                    <span class="icon"
                      ><ion-icon name="close-outline"></ion-icon
                    ></span>
                  </div>
                </div>
              </button>
            </div>
            <!-- End of search bar -->
            <div class="col">
              <button class="cart-btn">
                <img
                  id="iconpacks"
                  src="./images/icons/shopping-bag.png"
                  data-bs-toggle="offcanvas"
                  href="#offcanvasExample"
                />
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <body>
    <main>
      <section id="section1" class="cta">
        <div class="container">
          <div class="row">
            <div class="col">
              <div id="frontpage" class="row">
                <div class="typing">
                  <div class="typing-effect">Timeless and iconic</div>
                </div>
                <div class="row mt-4 mb-3">
                  <h1 id="shopTitle">Lorem ipsum.</h1>
                </div>
                <div class="row mb-1">
                  <h5 id="shopDesription">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                    Duis interdum nisi ac augue sollicitudin lobortis. Ut
                    fermentum nunc purus, quis semper dolor tincidunt id.
                  </h5>
                </div>
                <div class="mb-4">
                  <button id="shopnow" type="button" class="shopbtn mt-4 mb-4">
                    Shop now
                  </button>
                </div>
                <div class="row">
                  <div class="d-flex column justify-content-between mb-4">
                    <img class="logo-img" src="./images/adidas-logo.png" />
                    <img class="logo-img" src="./images/reebok-logo.png" />
                    <img class="logo-img" src="./images/nike-logo.png" />
                    <img class="logo-img" src="./images/puma-logo.png" />
                  </div>
                </div>
              </div>
            </div>
            <div class="col mx-auto">
              <img
                src="./images/frontface.png"
                class="responsive"
                id="frontface"
              />
            </div>
          </div>
        </div>
      </section>

      <section id="featured-product">
        <div class="container">
          <div>
            <h1 class="py-4" id="featuredProduct">Featured Products</h1>
          </div>
          <div class="row" id="displayProduct"></div>
          <div class="row" id="displayModal"></div>
          <button class="more-btn">
            <span class="more-txt">More</span>
            <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
          </button>
        </div>
      </section>

      <!-- carousel -->
      <section id="carousel" class="py-4 shadow-sm">
        <div class="container py-4">
          <div class="row">
            <div class="col-xl-4 px-0">
              <img src="./images/model1.jpg" alt="model1" class="w-100 h-100" />
            </div>
            <div class="col-xl-4 px-0">
              <!-- carousel1 -->
              <div class="col">
                <div
                  id="carouselExampleFade"
                  class="carousel slide carousel-fade mx-auto"
                  data-bs-ride="carousel"
                >
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img
                        src="./images/shoe1.jpg"
                        class="d-block w-100"
                        alt="shoes1"
                      />
                    </div>
                    <div class="carousel-item">
                      <img
                        src="./images/shoe2.jpg"
                        class="d-block w-100"
                        alt="shoes2"
                      />
                    </div>
                    <div class="carousel-item">
                      <img
                        src="./images/shoe3.jpg"
                        class="d-block w-100"
                        alt="shoes3"
                      />
                    </div>
                    <div class="carousel-item">
                      <img
                        src="./images/shoe4.jpg"
                        class="d-block w-100"
                        alt="shoes4"
                      />
                    </div>
                  </div>
                  <button
                    class="carousel-control-prev"
                    type="button"
                    data-bs-target="#carouselExampleFade"
                    data-bs-slide="prev"
                  >
                    <span
                      class="carousel-control-prev-icon"
                      aria-hidden="true"
                    ></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button
                    class="carousel-control-next"
                    type="button"
                    data-bs-target="#carouselExampleFade"
                    data-bs-slide="next"
                  >
                    <span
                      class="carousel-control-next-icon"
                      aria-hidden="true"
                    ></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
              </div>
              <!-- carousel2 -->
              <div class="col">
                <div
                  id="carouselExampleFade"
                  class="carousel slide carousel-fade mx-auto"
                  data-bs-ride="carousel"
                >
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img
                        src="./images/enzo.png"
                        class="d-block w-100"
                        alt="shoes1"
                      />
                    </div>
                    <div class="carousel-item">
                      <img
                        src="./images/slipstream-suede.png"
                        class="d-block w-100"
                        alt="shoes2"
                      />
                    </div>
                    <div class="carousel-item">
                      <img
                        src="./images/jordan-courtside.jpg"
                        class="d-block w-100"
                        alt="shoes3"
                      />
                    </div>
                  </div>
                  <button
                    class="carousel-control-prev"
                    type="button"
                    data-bs-target="#carouselExampleFade"
                    data-bs-slide="prev"
                  >
                    <span
                      class="carousel-control-prev-icon"
                      aria-hidden="true"
                    ></span>
                    <span class="visually-hidden">Previous</span>
                  </button>
                  <button
                    class="carousel-control-next"
                    type="button"
                    data-bs-target="#carouselExampleFade"
                    data-bs-slide="next"
                  >
                    <span
                      class="carousel-control-next-icon"
                      aria-hidden="true"
                    ></span>
                    <span class="visually-hidden">Next</span>
                  </button>
                </div>
              </div>
            </div>
            <!-- Image -->
            <div class="col-xl-4 px-0">
              <img src="./images/model2.jpg" alt="model2" class="h-100 w-100" />
            </div>
          </div>
        </div>
      </section>
      <!-- End of carousel -->

      <!-- Testing Product Display -->
      <section id="test">
        <div class="container py-4" id="test-display"></div>
      </section>

      <!-- Shopping Cart Offcanvas -->
      <div
        class="offcanvas offcanvas-end"
        tabindex="-1"
        id="offcanvasExample"
        aria-labelledby="offcanvasExampleLabel"
      >
        <div class="offcanvas-header">
          <h5 class="offcanvas-title | text-center" id="offcanvasExampleLabel">
            Shopping Cart
          </h5>
          <button
            type="button"
            class="btn-close text-reset"
            data-bs-dismiss="offcanvas"
            aria-label="Close"
          ></button>
        </div>
        <div class="offcanvas-body">
          <div>
            <table class="table product_data">
              <thead>
                <tr class="text-center">
                  <th scope="col">Product</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Total</th>
                  <th scope="col" class="del-col"></th>
                </tr>
              </thead>
              <tbody id="shopping-cart">
                <!-- <span id="shopping-cart"></span> -->
              </tbody>
            </table>
          </div>
          <button id="checkout-btn" class="btn btn-warning w-100">
            CHECKOUT
          </button>
        </div>
      </div>
      <!-- End of Shopping Cart Offcanvas -->

      <!-- Toasts Response 200-->
      <div
        class="toast toast-center-center"
        role="alert"
        id="mytoast"
        aria-atomic="true"
      >
        <div class="toast-header">
          <img src="./images/icons/notification.png" style="width: 20px" />
          <strong class="mr-auto">GV Sports</strong>
          <small>&nbsp; 1 sec ago</small>
          <button
            type="button"
            class="close border-0 bg-transparent"
            data-bs-dismiss="toast"
            aria-label="Close"
          >
            <span
              style="position: absolute; top: 0; right: 0"
              aria-hidden="true"
              >&times;</span
            >
          </button>
        </div>
        <div class="toast-body text-left">Added to cart!</div>
      </div>
      <!-- End of Toasts -->

      <!-- Toasts Response 500-->
      <div
        class="toast toast-center-center"
        role="alert"
        id="badtoast"
        aria-atomic="true"
      >
        <div class="toast-header">
          <img src="./images/icons/notification.png" style="width: 20px" />
          <strong class="mr-auto">GV Sports</strong>
          <small>&nbsp; 1 sec ago</small>
          <button
            type="button"
            class="close border-0 bg-transparent"
            data-bs-dismiss="toast"
            aria-label="Close"
          >
            <span
              style="position: absolute; top: 0; right: 0"
              aria-hidden="true"
              >&times;</span
            >
          </button>
        </div>
        <div class="toast-body text-left">Something went wrong</div>
      </div>
      <!-- End of Toasts -->

      <!-- Footer -->
      <footer>
        <section>
          <div class="container py-4 px-4">
            <div class="d-flex row justify-content-between">
              <div class="col-lg-2">
                <h5>SHOPPING WITH GV</h5>
                <p>Shipping Policy</p>
                <p>Payment Methods</p>
                <p>Sizing Chart</p>
              </div>
              <div class="col-lg-2">
                <h5>CUSTOMER CARE</h5>
                <p>Track an order</p>
                <p>Returns & Cancellations</p>
                <p>Contact Us</p>
              </div>
              <div class="col-lg-2">
                <h5>OUR COMPANY</h5>
                <p>Who We Are</p>
                <p>GV Style Blog</p>
                <p>Careers</p>
              </div>
              <div class="col-lg-2">
                <h5>LEGAL</h5>
                <p>Privacy Policy</p>
                <p>Terms of Use</p>
                <p>Site Map</p>
              </div>
              <div class="col-lg-2">
                <div class="team">
                  <div class="container">
                    <h5 class="section-heading">SOCIAL</h5>
                    <div class="containerP">
                      <div class="profile">
                        <img src="./images/facebook.png" alt="" /><span
                          class="name"
                          >Facebook</span
                        >
                      </div>
                      <div class="profile">
                        <img src="./images/instagram.png" alt="" /><span
                          class="name"
                          >Instagram</span
                        >
                      </div>
                      <div class="profile">
                        <img src="./images/twitter.png" alt="" /><span
                          class="name"
                          >Twitter</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <hr class="solid" />
          <p class="cp | text-center">
            Copyright © 2022 GV Sports All rights reserved
          </p>
        </section>
      </footer>
    </main>

    <!-- search bar js-->
    <script type="text/javascript" src="./js/scripts.js"></script>

    <!-- featured product -->
    <script src="./jquery-migrate/dist/jquery-migrate.min.js"></script>
    <!-- <script type="text/javascript" src="./js/displayProduct.js"></script> -->
    <script>
      $(document).on("ready", function () {
        $.ajax({
          url: "http://localhost/phptutorial/E-commerce/api/showProduct.php",
          type: "GET",
          success: function (data) {
            var json = JSON.parse(data);
            var result = json.result;
            var html_cards = ``;
            var html_modals = ``;
            let modal_number = 1;
            let cartBtn_number = 1;
            let uk_size_6 = 1;
            let uk_size_7 = 2;
            let uk_size_8 = 3;
            let uk_size_9 = 4;
            let uk_size_10 = 5;

            for (let i = 0; i < result.length; i++) {
              var product_id = result[i].id;
              var product_name = result[i].name;
              var product_price = result[i].price;
              var product_image = result[i].image;

              html_cards += `
                        <div class="col-xl-3 py-4">
                          <div class="card shadow-lg">
                          <img src="./${product_image}" class="d-flex w-100 shadow-sm" />
                            <ul class="px-0 py-2">
                              <li>
                                <a data-bs-toggle="modal" data-bs-target="#modal${modal_number}" href="#"
                                >${product_name}</a>
                              </li>
                              <li>RM ${product_price}</li>
                            </ul>
                          </div>
                        </div>
                        `;
              html_modals += `

                        <div
                        class="modal fade modal-lg"
                        id="modal${modal_number}"
                        tabindex="-1"
                        aria-labelledby="exampleModalLabel"
                        aria-hidden="true"
                        >
                          <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel"></h1>
                                <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                                ></button>
                              </div>
                              <div class="modal-body">
                                <div id="addCart">
                                  <div class="row">
                                    <div class="col-lg-6">
                                      <img
                                      src="./${product_image}"
                                      class="w-100 h-100 min-height-50 min-width-50"
                                      />
                                    </div>
                                    <div class="col-lg-6 px-4 py-8 px-8">
                                      <div class="top-50">
                                        <p
                                        class="font-size-40 font-weight-bold text-black mt-4"
                                        >
                                ${product_name}
                              </p>
                              <p>RM${product_price}</p>
                              <hr class="solid" />
                              <div>
                                <p>Choose UK sizes</p>
                                <div
                                  class="btn-group mb-4 size-data"
                                  role="group"
                                  aria-label="Choose shoe size"
                                >
                                  <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio"
                                    id="btnradio${uk_size_6}"
                                    autocomplete="off"
                                    value="UK6"
                                  />
                                  <label
                                    class="btn btn-outline-dark"
                                    for="btnradio${uk_size_6}"
                                    >UK 6</label
                                  >
    
                                  <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio"
                                    id="btnradio${uk_size_7}"
                                    autocomplete="off"
                                    value="UK7"
                                  />
                                  <label
                                    class="btn btn-outline-dark"
                                    for="btnradio${uk_size_7}"
                                    >UK 7</label
                                  >
    
                                  <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio"
                                    id="btnradio${uk_size_8}"
                                    autocomplete="off"
                                    value="UK8"
                                  />
                                  <label
                                    class="btn btn-outline-dark"
                                    for="btnradio${uk_size_8}"
                                    >UK 8</label
                                  >
    
                                  <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio"
                                    id="btnradio${uk_size_9}"
                                    autocomplete="off"
                                    value="UK9"
                                  />
                                  <label
                                    class="btn btn-outline-dark"
                                    for="btnradio${uk_size_9}"
                                    >UK 9</label
                                  >
    
                                  <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio"
                                    id="btnradio${uk_size_10}"
                                    autocomplete="off"
                                    value="UK10"
                                  />
                                  <label
                                    class="btn btn-outline-dark"
                                    for="btnradio${uk_size_10}"
                                    >UK 10</label
                                  >
                                </div>
                              </div>

                              <button
                                type="submit"
                                class="btn btn-block btn-warning"
                                name="addCart"
                                id="addCartBtn${cartBtn_number}"
                                value="${product_id}"
                              >
                                ADD TO CART
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-outline-dark"
                        data-bs-dismiss="modal"
                      >
                        Close
                      </button>
                    </div>
                  </div>
                </div>
              </div>

        <script>

          <!-- Add to Cart js -->
          $("#addCartBtn${cartBtn_number}").click(function (e) {
            e.preventDefault();
            
            var product_size = $('input[name="btnradio"]:checked').val();
            var product_id = $(this).val();
            var qty = 1;

            $.ajax({
              url: "http://localhost/phptutorial/E-commerce/api/addToCart.php",
              type: "POST",
              data: {
                "product_id": product_id,
                "product_qty" : qty,
                "product_size" : product_size
              }, 

              success: function (response)
              {
                if(response == 200) {
                  $("#mytoast").toast({ delay: 5000 });
                  $("#mytoast").toast("show");
                }
                else if(response==500) {
                  $("#badtoast").toast({ delay: 5000 });
                  $("#badtoast").toast("show");
                }
              }
            })

          });

        </\script>

                    `;
              modal_number++;
              cartBtn_number++;
              uk_size_6 += 5;
              uk_size_7 += 5;
              uk_size_8 += 5;
              uk_size_9 += 5;
              uk_size_10 += 5;
            }
            $("#displayProduct").html(html_cards);
            $("#displayModal").html(html_modals);
          },
        });

        $.ajax({
          url: "http://localhost/phptutorial/E-commerce/api/showCart.php",
          type: "GET",
          success: function (data) {
            var json = JSON.parse(data);
            var result = json.result;
            var html_cart = ``;

            for (let i = 0; i < result.length; i++) {
              var cart_id = result[i].cart_id;
              var product_id = result[i].product_id;
              var product_image = result[i].product_image;
              var product_name = result[i].product_name;
              var product_size = result[i].product_size;
              var product_price = result[i].product_price;
              var product_qty = result[i].product_qty;
              var total = product_price * product_qty;

              if (result.length === 0) {
                html_cart += `

                <h5 class="text-center font-italic py-4">No items added.</h5>
              
                <script>
                  $(function () {
                  $("#checkout-btn").hide();
                  });
                <\/script>
                
                `;
              } else {
                html_cart += `
                  <tr>
                    <td>
                      <img
                        class="img-fluid product-img"
                        src=".${product_image}"
                      <a href="#">${product_name}</a>
                      <a>RM${product_price}</a>
                    </td>
                    <td>
                      <div class="input-group mb-3" style="width: 150px">
                        <div class="input-group-prepend">
                          <button class="input-group-text minus-btn" id="editCartBtn">-</button>
                        </div>
                        <input
                          type="text"
                          class="qty-input form-control | text-center bg-white"
                          aria-label="Quantity"
                          value="1"
                          disabled
                          aria-disabled="true"
                        />
                        <div class="input-group-append">
                          <button class="input-group-text plus-btn" id="editCartBtn">+</button>
                        </div>
                      </div>
                    </td>
                    <td>RM${total}</td>
                    <td>
                      <button class="del-btn" value=${cart_id}>
                        <i
                          class="fa fa-trash text-danger"
                          aria-hidden="true"
                        ></i>
                      </button>
                    </td>
                  </tr>
            <script>
              $(".del-btn").click(function (e) {
                e.preventDefault();
                var id = $(this).val();

                swal({
                  title: "Are you sure?",
                  text: "You will remove this item from your cart",
                  icon: "warning",
                  buttons: true,
                  dangerMode: true,
                })
                .then((willDelete) => {
                  if (willDelete) {
                    $.ajax({
                      url: "http://localhost/phptutorial/E-commerce/api/delCartItem.php",
                      type: "POST",
                      data: {
                        "cart_id": id
                      },
                      success: function(response)
                      {
                        if(response == 200) {
                          swal("Success!","Item has been removed","success")
                        }
                      }
                    })
                } else if(response == 500){
                  swal("Error!", "Something went wrong", "error")
                }
                });

              })
            <\/script>
              
              `;
              }
            }

            $("#shopping-cart").html(html_cart);
          },
        });
      });
    </script>

    <!-- Load header (search bar unresponsive)-->
    <!-- <script> 
    $(function(){
      $("#header-content").load("header.html"); 
    });
    </script>  -->

    <!-- Load filter tags -->
    <script>
      $(function () {
        $("#test-display").load("filterTags.html");
      });
    </script>

    <!-- Load Shopping Cart (addToCart.js didn't execute with load?) -->
    <!-- <script>
      $(function () {
        $("#shopping-cart2").load("cart.html");
      });
    </script> -->

    <!-- Add to Cart JS-->
    <script type="text/javascript" src="./js/addToCart.js"></script>

    <!-- Sweet Alert JS -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <!-- Scroll to Featured Product section -->
    <script>
      $("#shopnow").click(function () {
        $("html, body").animate(
          {
            scrollTop: $("#featured-product").offset().top,
          },
          1000
        );
      });
    </script>
  </body>
</html>
